{"version":3,"sources":["processor/intents/creeps/_die.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","roomObjects","bulk","stats","dropRate","gameTime","undefined","CREEP_CORPSE_RATE","remove","_id","decayTime","body","length","TOMBSTONE_DECAY_PER_PART","tombstoneDecay","tombstone","type","room","x","y","user","deathTime","creepId","creepName","name","creepTicksToLive","ageTime","creepBody","map","b","creepSaying","actionLog","say","isPublic","message","container","find","userSummoned","lifeTime","any","CLAIM","CREEP_CLAIM_LIFE_TIME","CREEP_LIFE_TIME","bodyResources","energy","calcCreepCost","_ticksToLive","forEach","i","boost","LAB_BOOST_MINERAL","LAB_BOOST_ENERGY","amount","resourceType","Math","floor","hits","targetTotal","calcResources","toContainerAmount","min","energyCapacity","update","RESOURCES_ALL","insert","inc"],"mappings":"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","file":"../../../../processor/intents/creeps/_die.js","sourceRoot":"/src"}