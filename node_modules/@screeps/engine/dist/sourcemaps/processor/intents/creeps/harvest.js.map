{"version":3,"sources":["processor/intents/creeps/harvest.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","roomObjects","roomTerrain","bulk","bulkUsers","roomController","stats","type","spawning","target","id","Math","abs","x","y","energy","user","reservation","harvestAmount","calcBodyEffectiveness","body","WORK","HARVEST_POWER","amount","min","invaderHarvested","update","sum","calcResources","energyCapacity","resourceType","actionLog","harvest","inc","mineralAmount","extractor","find","i","STRUCTURE_EXTRACTOR","checkStructureAgainstController","cooldown","HARVEST_MINERAL_POWER","mineralType","_cooldown","EXTRACTOR_COOLDOWN"],"mappings":"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","file":"../../../../processor/intents/creeps/harvest.js","sourceRoot":"/src"}