{"version":3,"sources":["game/rooms.js"],"names":["_","require","utils","driver","getRuntimeDriver","C","constants","pathfinding","abs","Math","min","max","runtimeData","intents","register","globals","positionsSetCacheCounter","createdFlagNames","createdSpawnNames","privateStore","createdConstructionSites","getPathfinder","id","opts","defaults","maxOps","heuristicWeight","key","pfFinders","AStarFinder","diagonalMovement","maxOpsLimit","heuristic","Heuristic","chebyshev","weight","makePathfindingGrid","endNodesKey","rows","Array","obstacleTypes","clone","OBSTACLE_OBJECT_TYPES","ignoreDestructibleStructures","without","ignoreCreeps","y","x","terrainCode","staticTerrainData","TERRAIN_MASK_WALL","TERRAIN_MASK_SWAMP","objectsByRoomKeys","forEach","object","objectsByRoom","contains","type","isPublic","user","_id","structureType","ignore","isArray","Error","i","pos","isObject","isUndefined","RoomPosition","avoid","pfEndNodes","Grid","getPathfindingGrid","gridName","isNumber","positionsSetCache","pfGrid","makePathfindingGrid2","costs","PathFinder","CostMatrix","push","rooms","controller","safeMode","my","set","get","ignoreRoads","getPathfindingGrid2","_findPath2","fromPos","toPos","isEqualTo","serialize","deprecated","undefined","maxRooms","roomName","searchOpts","roomCallback","costMatrix","costCallback","resultMatrix","plainCost","swampCost","ret","search","range","path","length","isNearTo","curX","curY","resultPath","result","dx","dy","direction","getDirection","serializePath","_findClosestByPath2","objects","find","filter","objectOnSquare","obj","goals","map","lastPos","exports","make","_runtimeData","_intents","_register","_globals","Room","data","wrapFn","objectData","gameInfo","gameId","match","games","name","energyAvailable","energyCapacityAvailable","survivalInfo","pfDijkstraFinder","DijkstraFinder","pathCache","cache","array","positionsArray","findKey","every","j","any","parseInt","lookTypeRegisters","creep","byRoom","creeps","energy","resource","source","sources","mineral","minerals","structure","structures","flag","flags","constructionSite","constructionSites","tombstone","tombstones","nuke","nukes","lookTypeSpatialRegisters","spatial","visual","RoomVisual","deserializePath","str","prototype","toString","toJSON","Object","defineProperty","Memory","value","FIND_DROPPED_ENERGY","FIND_DROPPED_RESOURCES","findCache","FIND_EXIT","FIND_EXIT_TOP","concat","FIND_EXIT_BOTTOM","FIND_EXIT_RIGHT","FIND_EXIT_LEFT","exits","reduce","accum","getPositionAt","_lookSpatialRegister","typeName","outArray","withCoords","item","terrain","typeResult","_lookAreaMixedRegister","top","left","bottom","right","withType","asArray","typeRegister","keys","checkInside","lookAt","firstArg","secondArg","fetchXYArguments","LOOK_CREEPS","LOOK_ENERGY","LOOK_RESOURCES","LOOK_SOURCES","LOOK_MINERALS","LOOK_STRUCTURES","LOOK_FLAGS","LOOK_CONSTRUCTION_SITES","LOOK_TERRAIN","LOOK_NUKES","LOOK_TOMBSTONES","lookForAt","ERR_INVALID_ARGS","lookAtArea","lookForAtArea","findPath","_useNewPathFinder","fromX","fromY","cacheKeySuffix","grid","toX","toY","cacheKey","cloneDeep","finder","setWalkableAt","splice","step","lastStep","createFlag","color","secondaryColor","size","Game","FLAGS_LIMIT","ERR_FULL","COLOR_WHITE","COLORS_ALL","cnt","indexOf","ERR_NAME_EXISTS","Flag","pushByName","createConstructionSite","isString","CONSTRUCTION_COST","spawns","level","ERR_RCL_NOT_ENOUGH","checkControllerAvailability","checkConstructionSite","ERR_INVALID_TARGET","userObjects","MAX_CONSTRUCTION_SITES","intent","OK","getEndNodes","findExitTo","room","findExit","enumerable","circle","style","console","addVisual","t","s","line","x1","y1","x2","y2","rect","w","h","poly","points","text","getSize","getVisualSize","clear","clearVisual","makePos","isNaN","inRangeTo","thirdArg","getDirectionTo","roomNameToXY","thisRoomX","thisRoomY","thatRoomX","thatRoomY","findPathTo","exitDir","exit","findClosestByPath","isNear","endNodes","algorithm","minH","sumH","distance","lastStepPos","findInRange","findClosestByRange","closest","minRange","Infinity","getRangeTo","look","lookFor","getTerrainAt","RoomObject"],"mappings":"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","file":"../../game/rooms.js","sourceRoot":"/src"}