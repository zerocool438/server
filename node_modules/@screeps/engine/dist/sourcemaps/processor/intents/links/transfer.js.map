{"version":3,"sources":["processor/intents/links/transfer.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","roomObjects","roomTerrain","bulk","bulkUsers","roomController","type","energy","amount","target","id","contains","targetTotal","Math","abs","x","y","calcResources","cooldown","checkStructureAgainstController","energyCapacity","ceil","LINK_LOSS_RATIO","LINK_COOLDOWN","max","actionLog","transferEnergy","update"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AAAA,IACIC,QAASD,QAAQ,gBAAR,CADb;AAAA,IAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,IAGIC,IAAIF,OAAOG,SAHf;;AAKAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,WAAzB,EAAsCC,WAAtC,EAAmDC,IAAnD,EAAyDC,SAAzD,EAAoEC,cAApE,EAAoF;;AAEjG,QAAGN,OAAOO,IAAP,IAAe,MAAlB,EAA0B;AACtB;AACH;;AAED,QAAGP,OAAOQ,MAAP,GAAgBP,OAAOQ,MAAvB,IAAiCR,OAAOQ,MAAP,GAAgB,CAApD,EAAuD;AACnD;AACH;;AAED,QAAIC,SAASR,YAAYD,OAAOU,EAAnB,CAAb;AACA,QAAG,CAACD,MAAJ,EAAY;AACR;AACH;;AAED,QAAG,CAACnB,EAAEqB,QAAF,CAAW,CAAC,MAAD,EAAQ,OAAR,CAAX,EAA6BF,OAAOH,IAApC,CAAJ,EAA+C;AAC3C;AACH;AACD,QAAIM,WAAJ;AACA,QAAGH,OAAOH,IAAP,IAAe,OAAlB,EAA2B;AACvB,YAAGO,KAAKC,GAAL,CAASL,OAAOM,CAAP,GAAWhB,OAAOgB,CAA3B,IAAgC,CAAhC,IAAqCF,KAAKC,GAAL,CAASL,OAAOO,CAAP,GAAWjB,OAAOiB,CAA3B,IAAgC,CAAxE,EAA2E;AACvE;AACH;AACDJ,sBAAcpB,MAAMyB,aAAN,CAAoBR,MAApB,CAAd;AACH;AACD,QAAGA,OAAOH,IAAP,IAAe,MAAlB,EAA0B;AACtB,YAAGP,OAAOmB,QAAP,GAAkB,CAArB,EAAwB;AACpB;AACH;AACD,YAAG,CAAC1B,MAAM2B,+BAAN,CAAsCpB,MAAtC,EAA8CE,WAA9C,EAA2DI,cAA3D,CAAJ,EAAgF;AAC5E;AACH;AACDO,sBAAcH,OAAOF,MAArB;AACH;;AAED,QAAGK,eAAeH,OAAOW,cAAzB,EAAyC;AACrC;AACH;;AAED,QAAIZ,SAASR,OAAOQ,MAApB;AACA,QAAGI,cAAcJ,MAAd,GAAuBC,OAAOW,cAAjC,EAAiD;AAC7CZ,iBAASC,OAAOW,cAAP,GAAwBR,WAAjC;AACH;;AAEDH,WAAOF,MAAP,IAAiBC,MAAjB;AACAT,WAAOQ,MAAP,IAAiBC,MAAjB;;AAEA,QAAGC,OAAOH,IAAP,IAAe,MAAlB,EAA0B;AACtBG,eAAOF,MAAP,IAAiBM,KAAKQ,IAAL,CAAUb,SAASb,EAAE2B,eAArB,CAAjB;AACAvB,eAAOmB,QAAP,IAAmBvB,EAAE4B,aAAF,GAAkBV,KAAKW,GAAL,CAASX,KAAKC,GAAL,CAASL,OAAOM,CAAP,GAAWhB,OAAOgB,CAA3B,CAAT,EAAwCF,KAAKC,GAAL,CAASL,OAAOO,CAAP,GAAWjB,OAAOiB,CAA3B,CAAxC,CAArC;AACAjB,eAAO0B,SAAP,CAAiBC,cAAjB,GAAkC,EAACX,GAAGN,OAAOM,CAAX,EAAcC,GAAGP,OAAOO,CAAxB,EAAlC;AACH;;AAIDb,SAAKwB,MAAL,CAAY5B,MAAZ,EAAoB,EAACQ,QAAQR,OAAOQ,MAAhB,EAAwBW,UAAUnB,OAAOmB,QAAzC,EAAmDO,WAAW1B,OAAO0B,SAArE,EAApB;AACAtB,SAAKwB,MAAL,CAAYlB,MAAZ,EAAoB,EAACF,QAAQE,OAAOF,MAAhB,EAApB;AACH,CAzDD","file":"../../../../processor/intents/links/transfer.js","sourceRoot":"/src"}