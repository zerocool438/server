{"version":3,"sources":["processor/intents/_damage.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","target","damage","damageType","roomObjects","roomTerrain","bulk","roomController","stats","gameTime","roomInfo","hits","attackBackPower","type","any","x","y","calcBodyEffectiveness","body","ATTACK","ATTACK_POWER","_damageToApply","POWER_BANK_HIT_BACK","user","safeMode","decayTime","RESOURCES_ALL","forEach","resourceType","room","remove","_id","spawning","find","name","update","actionLog","attacked","notifyWhenAttacked","sendAttackingNotification","lastPvpTime"],"mappings":"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","file":"../../../processor/intents/_damage.js","sourceRoot":"/src"}