'use strict';

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var _ = require('lodash'),
    utils = require('../../../utils'),
    driver = utils.getDriver(),
    C = driver.constants;

module.exports = function (object, roomObjects, roomTerrain, bulk) {

    if (!object || object.type != 'energy') return;

    var resourceType = object.resourceType || 'energy';

    object[resourceType] -= Math.ceil(object[resourceType] / C.ENERGY_DECAY);

    if (object[resourceType] <= 0 || !object[resourceType]) {
        if (_.isNaN(object[resourceType])) {
            console.log("Energy NaN: dropped");
        }
        bulk.remove(object._id);
        delete roomObjects[object._id];
    } else {
        bulk.update(object, _defineProperty({}, resourceType, object[resourceType]));
    }
};
//# sourceMappingURL=../../../sourcemaps/processor/intents/energy/tick.js.map
