{"version":3,"sources":["processor/intents/towers/attack.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","roomObjects","roomTerrain","bulk","bulkUsers","roomController","stats","gameTime","roomInfo","type","spawning","target","id","hits","energy","TOWER_ENERGY_COST","rampart","find","x","y","range","Math","max","abs","effect","TOWER_POWER_ATTACK","TOWER_OPTIMAL_RANGE","TOWER_FALLOFF_RANGE","TOWER_FALLOFF","floor","update","actionLog","attack","attacked","notifyWhenAttacked","sendAttackingNotification"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AAAA,IACIC,QAASD,QAAQ,gBAAR,CADb;AAAA,IAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,IAGIC,IAAIF,OAAOG,SAHf;;AAKAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,WAAzB,EAAsCC,WAAtC,EAAmDC,IAAnD,EAAyDC,SAAzD,EAAoEC,cAApE,EAAoFC,KAApF,EAA2FC,QAA3F,EAAqGC,QAArG,EAA+G;;AAE5H,QAAGT,OAAOU,IAAP,IAAe,OAAlB,EAA2B;AACvB;AACH;AACD,QAAGV,OAAOW,QAAV,EAAoB;AAChB;AACH;;AAED,QAAIC,SAASV,YAAYD,OAAOY,EAAnB,CAAb;AACA,QAAG,CAACD,MAAD,IAAWA,UAAUZ,MAAxB,EAAgC;AAC5B;AACH;AACD,QAAGY,OAAOF,IAAP,IAAe,OAAf,IAA0BE,OAAOD,QAApC,EAA8C;AAC1C;AACH;AACD,QAAG,CAACC,OAAOE,IAAX,EAAiB;AACb;AACH;AACD,QAAGd,OAAOe,MAAP,GAAgBnB,EAAEoB,iBAArB,EAAwC;AACpC;AACH;AACD,QAAIC,UAAU1B,EAAE2B,IAAF,CAAOhB,WAAP,EAAoB,EAACQ,MAAM,SAAP,EAAkBS,GAAGP,OAAOO,CAA5B,EAA+BC,GAAGR,OAAOQ,CAAzC,EAApB,CAAd;AACA,QAAGH,OAAH,EAAY;AACRL,iBAASK,OAAT;AACH;;AAED,QAAII,QAAQC,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASZ,OAAOO,CAAP,GAAWnB,OAAOmB,CAA3B,CAAT,EAAwCG,KAAKE,GAAL,CAASZ,OAAOQ,CAAP,GAAWpB,OAAOoB,CAA3B,CAAxC,CAAZ;AACA,QAAIK,SAAS7B,EAAE8B,kBAAf;AACA,QAAGL,QAAQzB,EAAE+B,mBAAb,EAAkC;AAC9B,YAAGN,QAAQzB,EAAEgC,mBAAb,EAAkC;AAC9BP,oBAAQzB,EAAEgC,mBAAV;AACH;AACDH,kBAAUA,SAAS7B,EAAEiC,aAAX,IAA4BR,QAAQzB,EAAE+B,mBAAtC,KAA8D/B,EAAEgC,mBAAF,GAAwBhC,EAAE+B,mBAAxF,CAAV;AACH;AACDF,aAASH,KAAKQ,KAAL,CAAWL,MAAX,CAAT;;AAEA,QAAG,CAACA,MAAJ,EAAY;AACR;AACH;;AAEDjC,YAAQ,YAAR,EAAsBQ,MAAtB,EAA8BY,MAA9B,EAAsCa,MAAtC,EAA8C,QAA9C,EAAwDvB,WAAxD,EAAqEC,WAArE,EAAkFC,IAAlF,EAAwFE,cAAxF,EAAwGC,KAAxG,EAA+GC,QAA/G,EAAyHC,QAAzH;;AAEAT,WAAOe,MAAP,IAAiBnB,EAAEoB,iBAAnB;AACAZ,SAAK2B,MAAL,CAAY/B,MAAZ,EAAoB,EAACe,QAAQf,OAAOe,MAAhB,EAApB;;AAGAf,WAAOgC,SAAP,CAAiBC,MAAjB,GAA0B,EAACd,GAAGP,OAAOO,CAAX,EAAcC,GAAGR,OAAOQ,CAAxB,EAA1B;AACA,QAAGR,OAAOoB,SAAV,EAAqB;AACjBpB,eAAOoB,SAAP,CAAiBE,QAAjB,GAA4B,EAACf,GAAGnB,OAAOmB,CAAX,EAAcC,GAAGpB,OAAOoB,CAAxB,EAA5B;AACH;;AAED,QAAGR,OAAOuB,kBAAV,EAA8B;AAC1B1C,cAAM2C,yBAAN,CAAgCxB,MAAhC,EAAwCN,cAAxC;AACH;AAKJ,CA3DD","file":"../../../../processor/intents/towers/attack.js","sourceRoot":"/src"}